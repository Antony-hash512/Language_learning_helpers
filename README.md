
Проект для практики и тестирования словарного запаса с использованием [Google Gemini CLI](https://github.com/google-gemini/gemini-cli).


## Описание

Этот скрипт на Bash помогает лучше запоминать слова целевого языка с учётом контекста. Он берёт слово из файла, с помощью Gemini API генерирует предложение с ним, а затем проверяет ваш перевод этого слова в данном контексте.

Может быть легко использован для любой пары языков (целевой-нативный), путём замены всего двух строковых переменных в скрипте (по умолчанию там выставлено целевой язык - английский, нативный - русский).

## TODO:
 - [ ] Добавить опциональную озвучку составленных предложений при помощи голосового движка.
 - [x] Использовать локальное кеширование для уже составленных предложений (реализовано с помощью базы данных SQLite).
 - [x] Добавить использование цветных текстов в консоли.
 - [ ] Сделать конфигурационный файл с настройками.
 - [ ] Добавить возможность пользователю указать его уровень языка засчёт дополнительного промпта (может быть полезно, если его уровень низкий, и пользователь использует список слов начального уровня).


## Возможности

-   Генерация предложений с заданными словами.
-   Проверка перевода слова в контексте предложения.
-   Возможность запросить несколько разных контекстов для одного слова.
-   Логирование сессии в файл.

## Требования
-   `Linux`, `MacOS`, прочая линуксоподобная ОС или линуксовая командная строка на винде (`WSL`'ом вроде зовётся). Или даже `Android` (инструкция ниже)
-   `bash`
-   `nodejs` версии 18 или выше и `npm`
-   `@google/gemini-cli`
-   `sqlite3` и `jq` (для локального кеширования предложений)
-   `RHVoice` (опционально, для озвучки предложений; данная возможность пока только планируется к добавлению в ближайшее время)

## Установка

1.  **Клонируйте репозиторий:**
    ```bash
    git clone https://github.com/Antony-hash512/Language_learning_helpers
    cd Language_learning_helpers
    ```
2.  **Установите `nodejs` и `npm`:**

    Для Arch Linux вы можете установить их с помощью следующей команды. Это потребует прав суперпользователя (root).
    ```bash
    sudo pacman -S nodejs npm
    ```
    Для других дистрибутивов используйте соответствующий менеджер пакетов.

3.  **Установите Google Gemini CLI:**
    ```bash
    npm install -g @google/gemini-cli
    ```
    В зависимости от вашей конфигурации `npm`, эта команда может потребовать `sudo`.
    Но можно и без `sudo` настроить запуск команды `gemini` только для одного текущего пользователя:
    Для этого нужно добавить `~/.npm-global/bin` в переменную окружения `PATH`.
    Для `bash` можно добавить в файл `~/.bashrc` или `~/.zshrc` следующую строку:
    ```bash
    export PATH="$HOME/.npm-global/bin:$PATH"
    ```
    Для `fish` можно добавить в файл `~/.config/fish/config.fish` или в любой файл в `~/.config/fish/conf.d/` и добавить туда следующую строку:
    ```fish
    fish_add_path ~/.npm-global/bin
    ```
    или
    ```fish
    set -x PATH "$HOME/.npm-global/bin $PATH"
    ```
    
4.  **Аутентификация `gemini-cli`:**

    Запустите `gemini` в первый раз, чтобы войти в свою учетную запись Google.
    ```bash
    gemini
    ```
    Следуйте инструкциям в терминале и браузере.

    Помимо авторизации через браузер, можно использовать ключ API. Но опытным путём я установил, что при авторизации через браузер лимиты на использование API значительно выше. Поэтому только в крайних случаях я рекомендую использовать авторизацию по ключу, например при запуске на голом `tty` и для скриптов в полностью автономных системах.

    Для использования ключа API можно использовать переменную окружения `GEMINI_API_KEY`.
    Для этого нужно добавить в файл `~/.bashrc` или `~/.zshrc` следующую строку:
    ```bash
    export GEMINI_API_KEY=<ваш_ключ>
    ```
    Для `fish` можно создать любой файл в `~/.config/fish/conf.d/` и добавить туда следующую строку:
    ```fish
    set -x GEMINI_API_KEY <ваш_ключ>
    ```
    Замените `<ваш_ключ>` на ваш реальный ключ. Получить ключ можно здесь: https://aistudio.google.com/apikey

5.  **Сделайте скрипт исполняемым (если он таковым не является):**
    ```bash
    chmod +x words_testing.sh
    ```

6.  **Установите `sqlite3` и `jq` (если они не установлены):**

    Для Arch Linux вы можете установить их с помощью следующей команды. Это потребует прав суперпользователя (root). Хотя в большинстве случаев они уже установлены по умолчанию.
    ```bash
    sudo pacman -S sqlite jq
    ```
    Для других дистрибутивов используйте соответствующий менеджер пакетов.

## Установка на Android

1.  **Установите `Termux`:**

    Для установки `Termux` можно использовать `F-Droid` или `Aurora Store`.
    Дайте разрешение на установку из источника из которого получен `F-Droid` или `Aurora Store`, установите `Termux` и запустите его. Для общесистемного буфера обмена можно также установить `Termux:API`.

2.  **Установите нужные пакеты:**
    ```bash
    pkg update
    pkg install nodejs sqlite git
    ```
3.  **При желании можно установить `fish`:**

    ```bash
    pkg install fish
    ```

4.  **Клонируйте репозиторий:**
    ```bash
    mkdir -p ~/git
    cd ~/git
    git clone https://github.com/Antony-hash512/Language_learning_helpers
    cd Language_learning_helpers
    npm install -g @google/gemini-cli
    ```

5.  **Сделайте скрипт исполняемым (если он таковым не является):**
    ```bash
    chmod +x words_testing.sh
    ```
6.  **Запустите скрипт:**
    ```bash
    ./words_testing.sh
    ```

## Настройка файла `words.txt`

Перед запуском скрипта необходимо создать файл `words.txt` в корневой директории проекта. Этот файл должен содержать слова, которые вы хотите изучить (повторить или закрепить их различные значения в памяти).

**Формат файла:**
-   Одно слово на строку.
-   Пустые строки игнорируются.
-   Можно добавлять фразовые глаголы или идиомы с пробелами.

**Пример `words.txt`:**
```
ubiquitous
ephemeral
serendipity
cacophony
juxtaposition
meticulous
run out of
break down
get along with
piece of cake
it's raining cats and dogs
```
### example-words.txt
Файл `example-words.txt` находится в репозитории для примера. По-умолчанию же скрипт подхватывает файл `words.txt` или тот, который передан в качестве аргумента.
```bash
./words_testing.sh another-file.txt
```


## Использование

-   **Стандартный запуск** (использует `words.txt`):
    ```bash
    ./words_testing.sh
    ```

-   **Использование другого файла со словами:**
    ```bash
    ./words_testing.sh my_words_file.txt
    ```

-   **Включение логирования:**

    Чтобы записать всю сессию в лог-файл, используйте ключ `--log`. Логи сохраняются в директорию `logs/`.
    ```bash
    ./words_testing.sh --log
    ```
## Команды

После проверки вашего перевода скрипт ожидает ввода команды.
Вы можете использовать как кириллические, так и латинские алиасы.

- `с` / `n` - перейти к следующему слову
- `к` / `k` - запросить другой контекст для текущего слова
- `п` / `t` - показать различные варианты перевода данного предложения
- `л` / `l` - включение/отключение логирования
- `в` / `q` - выйти из скрипта

## Вспомогательные файлы

Данные файлы появятся после работы скрипта.

- `sentences_cache.sqlite` - локальная база данных SQLite, в которой хранятся уже составленные предложения для предотвращения повторного составления одних и тех же предложений.
- `logs/` - директория, в которой хранятся логи сессии.
- `mistakes.txt` - файл, в который скрипт сортирует слова, с которыми вы ошибались при переводе.
- `no_mistakes.txt` - файл, в который скрипт сортирует слова, которые вы перевели без ошибок.